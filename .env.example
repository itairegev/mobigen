# =============================================================================
# Mobigen Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# Required variables are marked with [REQUIRED]

# -----------------------------------------------------------------------------
# Database [REQUIRED]
# -----------------------------------------------------------------------------
# Use port 9432 for Docker container (avoids conflict with local PostgreSQL on 5432)
DATABASE_URL=postgresql://mobigen:mobigen_dev_password@localhost:9432/mobigen

# -----------------------------------------------------------------------------
# Redis [REQUIRED for queues and caching]
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379

# -----------------------------------------------------------------------------
# Authentication (NextAuth.js)
# -----------------------------------------------------------------------------
NEXTAUTH_URL=http://localhost:3333
NEXTAUTH_SECRET=your-super-secret-key-change-in-production

# OAuth Providers (optional)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# -----------------------------------------------------------------------------
# AI Provider Configuration [REQUIRED for generation]
# -----------------------------------------------------------------------------
# Choose your AI provider: 'anthropic' or 'bedrock'
AI_PROVIDER=anthropic

# Option 1: Direct Anthropic API (when AI_PROVIDER=anthropic)
ANTHROPIC_API_KEY=your-anthropic-api-key

# Option 2: AWS Bedrock (when AI_PROVIDER=bedrock)
# Bedrock uses AWS credential chain. Configure via:
# - Environment variables (AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY)
# - AWS CLI profile (~/.aws/credentials)
# - IAM role (when running on EC2/ECS/Lambda)
#
# AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=your-access-key-id
# AWS_SECRET_ACCESS_KEY=your-secret-access-key
# AWS_SESSION_TOKEN=optional-session-token-for-assumed-roles

# Override specific Bedrock model IDs (optional)
# BEDROCK_SONNET_MODEL=us.anthropic.claude-sonnet-4-20250514-v1:0
# BEDROCK_OPUS_MODEL=us.anthropic.claude-sonnet-4-20250514-v1:0
# BEDROCK_HAIKU_MODEL=us.anthropic.claude-3-5-haiku-20241022-v1:0

# API timeout in milliseconds (default: 300000 = 5 minutes)
# CLAUDE_API_TIMEOUT_MS=300000

# -----------------------------------------------------------------------------
# Debug & Verbose Logging
# -----------------------------------------------------------------------------
# Enable verbose logging in Claude Agent SDK (shows API calls, responses, timing)
CLAUDE_SDK_VERBOSE=true

# Enable debug mode for generator service
GENERATOR_DEBUG=true

# Log level for all services (debug, info, warn, error)
LOG_LEVEL=debug

# -----------------------------------------------------------------------------
# Service URLs
# -----------------------------------------------------------------------------
# Generator Service (port 4000)
NEXT_PUBLIC_GENERATOR_URL=http://localhost:4000
GENERATOR_URL=http://localhost:4000

# Builder Service (port 5001 - 5000 conflicts with macOS AirPlay)
BUILDER_URL=http://localhost:5001

# Tester Service (port 6000)
TESTER_URL=http://localhost:6000

# Analytics Service (port 7000)
ANALYTICS_URL=http://localhost:7000

# Frontend URL (for CORS)
FRONTEND_URL=http://localhost:3333

# Enable simulation mode (for development without generator service)
NEXT_PUBLIC_SIMULATION_MODE=false

# -----------------------------------------------------------------------------
# Storage (S3/MinIO)
# -----------------------------------------------------------------------------
S3_ENDPOINT=http://localhost:9000
S3_ACCESS_KEY=minio_admin
S3_SECRET_KEY=minio_password
S3_REGION=us-east-1

# Bucket names
S3_BUCKET=mobigen-projects
ARTIFACTS_BUCKET=mobigen-artifacts
SCREENSHOTS_BUCKET=mobigen-screenshots

# -----------------------------------------------------------------------------
# Expo EAS Build Service
# -----------------------------------------------------------------------------
EXPO_TOKEN=your_expo_access_token_here
EXPO_ACCESS_TOKEN=your_expo_access_token_here
EAS_PROJECT_ID=

# -----------------------------------------------------------------------------
# Worker Configuration
# -----------------------------------------------------------------------------
WORKER_CONCURRENCY=3

# Build polling configuration
POLL_INTERVAL=30000
POLL_MAX_RETRIES=120
POLL_TIMEOUT=3600000

# -----------------------------------------------------------------------------
# Service Ports (for local development)
# -----------------------------------------------------------------------------
# Web Dashboard
WEB_PORT=3333

# Generator Service
GENERATOR_PORT=4000

# Builder Service
BUILDER_PORT=5001

# Tester Service
TESTER_PORT=6000

# Analytics Service
ANALYTICS_PORT=7000

# MinIO Console
MINIO_CONSOLE_PORT=9001

# -----------------------------------------------------------------------------
# Observability (optional)
# -----------------------------------------------------------------------------
LOG_LEVEL=info
SENTRY_DSN=

# -----------------------------------------------------------------------------
# Docker Compose Paths
# -----------------------------------------------------------------------------
# Path to Mobigen root (for template volumes)
MOBIGEN_ROOT=/app
